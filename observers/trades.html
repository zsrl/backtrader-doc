<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1" />
<meta name="generator" content="pdoc 0.10.0" />
<title>backtrader.observers.trades API documentation</title>
<meta name="description" content="" />
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/sanitize.min.css" integrity="sha256-PK9q560IAAa6WVRRh76LtCaI8pjTJ2z11v0miyNNjrs=" crossorigin>
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/typography.min.css" integrity="sha256-7l/o7C8jubJiy74VsKTidCy1yBkRtiUGbVkYBylBqUg=" crossorigin>
<link rel="stylesheet preload" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/styles/github.min.css" crossorigin>
<style>:root{--highlight-color:#fe9}.flex{display:flex !important}body{line-height:1.5em}#content{padding:20px}#sidebar{padding:30px;overflow:hidden}#sidebar > *:last-child{margin-bottom:2cm}.http-server-breadcrumbs{font-size:130%;margin:0 0 15px 0}#footer{font-size:.75em;padding:5px 30px;border-top:1px solid #ddd;text-align:right}#footer p{margin:0 0 0 1em;display:inline-block}#footer p:last-child{margin-right:30px}h1,h2,h3,h4,h5{font-weight:300}h1{font-size:2.5em;line-height:1.1em}h2{font-size:1.75em;margin:1em 0 .50em 0}h3{font-size:1.4em;margin:25px 0 10px 0}h4{margin:0;font-size:105%}h1:target,h2:target,h3:target,h4:target,h5:target,h6:target{background:var(--highlight-color);padding:.2em 0}a{color:#058;text-decoration:none;transition:color .3s ease-in-out}a:hover{color:#e82}.title code{font-weight:bold}h2[id^="header-"]{margin-top:2em}.ident{color:#900}pre code{background:#f8f8f8;font-size:.8em;line-height:1.4em}code{background:#f2f2f1;padding:1px 4px;overflow-wrap:break-word}h1 code{background:transparent}pre{background:#f8f8f8;border:0;border-top:1px solid #ccc;border-bottom:1px solid #ccc;margin:1em 0;padding:1ex}#http-server-module-list{display:flex;flex-flow:column}#http-server-module-list div{display:flex}#http-server-module-list dt{min-width:10%}#http-server-module-list p{margin-top:0}.toc ul,#index{list-style-type:none;margin:0;padding:0}#index code{background:transparent}#index h3{border-bottom:1px solid #ddd}#index ul{padding:0}#index h4{margin-top:.6em;font-weight:bold}@media (min-width:200ex){#index .two-column{column-count:2}}@media (min-width:300ex){#index .two-column{column-count:3}}dl{margin-bottom:2em}dl dl:last-child{margin-bottom:4em}dd{margin:0 0 1em 3em}#header-classes + dl > dd{margin-bottom:3em}dd dd{margin-left:2em}dd p{margin:10px 0}.name{background:#eee;font-weight:bold;font-size:.85em;padding:5px 10px;display:inline-block;min-width:40%}.name:hover{background:#e0e0e0}dt:target .name{background:var(--highlight-color)}.name > span:first-child{white-space:nowrap}.name.class > span:nth-child(2){margin-left:.4em}.inherited{color:#999;border-left:5px solid #eee;padding-left:1em}.inheritance em{font-style:normal;font-weight:bold}.desc h2{font-weight:400;font-size:1.25em}.desc h3{font-size:1em}.desc dt code{background:inherit}.source summary,.git-link-div{color:#666;text-align:right;font-weight:400;font-size:.8em;text-transform:uppercase}.source summary > *{white-space:nowrap;cursor:pointer}.git-link{color:inherit;margin-left:1em}.source pre{max-height:500px;overflow:auto;margin:0}.source pre code{font-size:12px;overflow:visible}.hlist{list-style:none}.hlist li{display:inline}.hlist li:after{content:',\2002'}.hlist li:last-child:after{content:none}.hlist .hlist{display:inline;padding-left:1em}img{max-width:100%}td{padding:0 .5em}.admonition{padding:.1em .5em;margin-bottom:1em}.admonition-title{font-weight:bold}.admonition.note,.admonition.info,.admonition.important{background:#aef}.admonition.todo,.admonition.versionadded,.admonition.tip,.admonition.hint{background:#dfd}.admonition.warning,.admonition.versionchanged,.admonition.deprecated{background:#fd4}.admonition.error,.admonition.danger,.admonition.caution{background:lightpink}</style>
<style media="screen and (min-width: 700px)">@media screen and (min-width:700px){#sidebar{width:30%;height:100vh;overflow:auto;position:sticky;top:0}#content{width:70%;max-width:100ch;padding:3em 4em;border-left:1px solid #ddd}pre code{font-size:1em}.item .name{font-size:1em}main{display:flex;flex-direction:row-reverse;justify-content:flex-end}.toc ul ul,#index ul{padding-left:1.5em}.toc > ul > li{margin-top:.5em}}</style>
<style media="print">@media print{#sidebar h1{page-break-before:always}.source{display:none}}@media print{*{background:transparent !important;color:#000 !important;box-shadow:none !important;text-shadow:none !important}a[href]:after{content:" (" attr(href) ")";font-size:90%}a[href][title]:after{content:none}abbr[title]:after{content:" (" attr(title) ")"}.ir a:after,a[href^="javascript:"]:after,a[href^="#"]:after{content:""}pre,blockquote{border:1px solid #999;page-break-inside:avoid}thead{display:table-header-group}tr,img{page-break-inside:avoid}img{max-width:100% !important}@page{margin:0.5cm}p,h2,h3{orphans:3;widows:3}h1,h2,h3,h4,h5,h6{page-break-after:avoid}}</style>
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/highlight.min.js" integrity="sha256-Uv3H6lx7dJmRfRvH8TH6kJD1TSK1aFcwgx+mdg3epi8=" crossorigin></script>
<script>window.addEventListener('DOMContentLoaded', () => hljs.initHighlighting())</script>
</head>
<body>
<main>
<article id="content">
<header>
<h1 class="title">Module <code>backtrader.observers.trades</code></h1>
</header>
<section id="section-intro">
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">#!/usr/bin/env python
# -*- coding: utf-8; py-indent-offset:4 -*-
###############################################################################
#
# Copyright (C) 2015-2023 Daniel Rodriguez
#
# This program is free software: you can redistribute it and/or modify
# it under the terms of the GNU General Public License as published by
# the Free Software Foundation, either version 3 of the License, or
# (at your option) any later version.
#
# This program is distributed in the hope that it will be useful,
# but WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
# GNU General Public License for more details.
#
# You should have received a copy of the GNU General Public License
# along with this program.  If not, see &lt;http://www.gnu.org/licenses/&gt;.
#
###############################################################################
from __future__ import (absolute_import, division, print_function,
                        unicode_literals)

import uuid

from .. import Observer
from ..utils.py3 import with_metaclass

from ..trade import Trade


class Trades(Observer):
    &#39;&#39;&#39;This observer keeps track of full trades and plot the PnL level achieved
    when a trade is closed.

    A trade is open when a position goes from 0 (or crossing over 0) to X and
    is then closed when it goes back to 0 (or crosses over 0 in the opposite
    direction)

    Params:
      - ``pnlcomm`` (def: ``True``)

        Show net/profit and loss, i.e.: after commission. If set to ``False``
        if will show the result of trades before commission
    &#39;&#39;&#39;
    _stclock = True

    lines = (&#39;pnlplus&#39;, &#39;pnlminus&#39;)

    params = dict(pnlcomm=True)

    plotinfo = dict(plot=True, subplot=True,
                    plotname=&#39;Trades - Net Profit/Loss&#39;,
                    plotymargin=0.10,
                    plothlines=[0.0])

    plotlines = dict(
        pnlplus=dict(_name=&#39;Positive&#39;,
                     ls=&#39;&#39;, marker=&#39;o&#39;, color=&#39;blue&#39;,
                     markersize=8.0, fillstyle=&#39;full&#39;),
        pnlminus=dict(_name=&#39;Negative&#39;,
                      ls=&#39;&#39;, marker=&#39;o&#39;, color=&#39;red&#39;,
                      markersize=8.0, fillstyle=&#39;full&#39;)
    )

    def __init__(self):

        self.trades = 0

        self.trades_long = 0
        self.trades_short = 0

        self.trades_plus = 0
        self.trades_minus = 0

        self.trades_plus_gross = 0
        self.trades_minus_gross = 0

        self.trades_win = 0
        self.trades_win_max = 0
        self.trades_win_min = 0

        self.trades_loss = 0
        self.trades_loss_max = 0
        self.trades_loss_min = 0

        self.trades_length = 0
        self.trades_length_max = 0
        self.trades_length_min = 0

    def next(self):
        for trade in self._owner._tradespending:
            if trade.data not in self.ddatas:
                continue

            if not trade.isclosed:
                continue

            pnl = trade.pnlcomm if self.p.pnlcomm else trade.pnl

            if pnl &gt;= 0.0:
                self.lines.pnlplus[0] = pnl
            else:
                self.lines.pnlminus[0] = pnl


class MetaDataTrades(Observer.__class__):
    def donew(cls, *args, **kwargs):
        _obj, args, kwargs = super(MetaDataTrades, cls).donew(*args, **kwargs)

        # Recreate the lines dynamically
        if _obj.params.usenames:
            lnames = tuple(x._name for x in _obj.datas)
        else:
            lnames = tuple(&#39;data{}&#39;.format(x) for x in range(len(_obj.datas)))

        # Generate a new lines class
        linescls = cls.lines._derive(uuid.uuid4().hex, lnames, 0, ())

        # Instantiate lines
        _obj.lines = linescls()

        # Generate plotlines info
        markers = [&#39;o&#39;, &#39;v&#39;, &#39;^&#39;, &#39;&lt;&#39;, &#39;&gt;&#39;, &#39;1&#39;, &#39;2&#39;, &#39;3&#39;, &#39;4&#39;, &#39;8&#39;, &#39;s&#39;, &#39;p&#39;,
                   &#39;*&#39;, &#39;h&#39;, &#39;H&#39;, &#39;+&#39;, &#39;x&#39;, &#39;D&#39;, &#39;d&#39;]

        colors = [&#39;b&#39;, &#39;g&#39;, &#39;r&#39;, &#39;c&#39;, &#39;m&#39;, &#39;y&#39;, &#39;k&#39;, &#39;b&#39;, &#39;g&#39;, &#39;r&#39;, &#39;c&#39;, &#39;m&#39;,
                  &#39;y&#39;, &#39;k&#39;, &#39;b&#39;, &#39;g&#39;, &#39;r&#39;, &#39;c&#39;, &#39;m&#39;]

        basedict = dict(ls=&#39;&#39;, markersize=8.0, fillstyle=&#39;full&#39;)

        plines = dict()
        for lname, marker, color in zip(lnames, markers, colors):
            plines[lname] = d = basedict.copy()
            d.update(marker=marker, color=color)

        plotlines = cls.plotlines._derive(
            uuid.uuid4().hex, plines, [], recurse=True)
        _obj.plotlines = plotlines()

        return _obj, args, kwargs  # return the instantiated object and args


class DataTrades(with_metaclass(MetaDataTrades, Observer)):
    _stclock = True

    params = ((&#39;usenames&#39;, True),)

    plotinfo = dict(plot=True, subplot=True, plothlines=[0.0],
                    plotymargin=0.10)

    plotlines = dict()

    def next(self):
        for trade in self._owner._tradespending:
            if trade.data not in self.ddatas:
                continue

            if not trade.isclosed:
                continue

            self.lines[trade.data._id - 1][0] = trade.pnl</code></pre>
</details>
</section>
<section>
</section>
<section>
</section>
<section>
</section>
<section>
<h2 class="section-title" id="header-classes">Classes</h2>
<dl>
<dt id="backtrader.observers.trades.DataTrades"><code class="flex name class">
<span>class <span class="ident">DataTrades</span></span>
<span>(</span><span>*args, **kwargs)</span>
</code></dt>
<dd>
<div class="desc"><p>Base class for LineXXX instances that hold more than one line</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class DataTrades(with_metaclass(MetaDataTrades, Observer)):
    _stclock = True

    params = ((&#39;usenames&#39;, True),)

    plotinfo = dict(plot=True, subplot=True, plothlines=[0.0],
                    plotymargin=0.10)

    plotlines = dict()

    def next(self):
        for trade in self._owner._tradespending:
            if trade.data not in self.ddatas:
                continue

            if not trade.isclosed:
                continue

            self.lines[trade.data._id - 1][0] = trade.pnl</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li><a title="backtrader.observer.Observer" href="../observer.html#backtrader.observer.Observer">Observer</a></li>
<li><a title="backtrader.lineiterator.ObserverBase" href="../lineiterator.html#backtrader.lineiterator.ObserverBase">ObserverBase</a></li>
<li><a title="backtrader.lineiterator.DataAccessor" href="../lineiterator.html#backtrader.lineiterator.DataAccessor">DataAccessor</a></li>
<li><a title="backtrader.lineiterator.LineIterator" href="../lineiterator.html#backtrader.lineiterator.LineIterator">LineIterator</a></li>
<li><a title="backtrader.lineseries.LineSeries" href="../lineseries.html#backtrader.lineseries.LineSeries">LineSeries</a></li>
<li><a title="backtrader.lineroot.LineMultiple" href="../lineroot.html#backtrader.lineroot.LineMultiple">LineMultiple</a></li>
<li><a title="backtrader.lineroot.LineRoot" href="../lineroot.html#backtrader.lineroot.LineRoot">LineRoot</a></li>
</ul>
<h3>Class variables</h3>
<dl>
<dt id="backtrader.observers.trades.DataTrades.alias"><code class="name">var <span class="ident">alias</span></code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="backtrader.observers.trades.DataTrades.aliased"><code class="name">var <span class="ident">aliased</span></code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="backtrader.observers.trades.DataTrades.frompackages"><code class="name">var <span class="ident">frompackages</span></code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="backtrader.observers.trades.DataTrades.linealias"><code class="name">var <span class="ident">linealias</span></code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="backtrader.observers.trades.DataTrades.packages"><code class="name">var <span class="ident">packages</span></code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="backtrader.observers.trades.DataTrades.params"><code class="name">var <span class="ident">params</span></code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="backtrader.observers.trades.DataTrades.plotinfo"><code class="name">var <span class="ident">plotinfo</span></code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="backtrader.observers.trades.DataTrades.plotlines"><code class="name">var <span class="ident">plotlines</span></code></dt>
<dd>
<div class="desc"></div>
</dd>
</dl>
<h3>Inherited members</h3>
<ul class="hlist">
<li><code><b><a title="backtrader.observer.Observer" href="../observer.html#backtrader.observer.Observer">Observer</a></b></code>:
<ul class="hlist">
<li><code><a title="backtrader.observer.Observer.addminperiod" href="../lineroot.html#backtrader.lineroot.LineMultiple.addminperiod">addminperiod</a></code></li>
<li><code><a title="backtrader.observer.Observer.incminperiod" href="../lineroot.html#backtrader.lineroot.LineMultiple.incminperiod">incminperiod</a></code></li>
<li><code><a title="backtrader.observer.Observer.lines" href="../lineseries.html#backtrader.lineseries.LineSeries.lines">lines</a></code></li>
<li><code><a title="backtrader.observer.Observer.minbuffer" href="../lineroot.html#backtrader.lineroot.LineRoot.minbuffer">minbuffer</a></code></li>
<li><code><a title="backtrader.observer.Observer.next" href="../lineiterator.html#backtrader.lineiterator.LineIterator.next">next</a></code></li>
<li><code><a title="backtrader.observer.Observer.nextstart" href="../lineiterator.html#backtrader.lineiterator.LineIterator.nextstart">nextstart</a></code></li>
<li><code><a title="backtrader.observer.Observer.once" href="../lineroot.html#backtrader.lineroot.LineRoot.once">once</a></code></li>
<li><code><a title="backtrader.observer.Observer.oncestart" href="../lineroot.html#backtrader.lineroot.LineRoot.oncestart">oncestart</a></code></li>
<li><code><a title="backtrader.observer.Observer.prenext" href="../lineiterator.html#backtrader.lineiterator.LineIterator.prenext">prenext</a></code></li>
<li><code><a title="backtrader.observer.Observer.preonce" href="../lineroot.html#backtrader.lineroot.LineRoot.preonce">preonce</a></code></li>
<li><code><a title="backtrader.observer.Observer.qbuffer" href="../lineroot.html#backtrader.lineroot.LineRoot.qbuffer">qbuffer</a></code></li>
<li><code><a title="backtrader.observer.Observer.setminperiod" href="../lineroot.html#backtrader.lineroot.LineRoot.setminperiod">setminperiod</a></code></li>
<li><code><a title="backtrader.observer.Observer.updateminperiod" href="../lineroot.html#backtrader.lineroot.LineRoot.updateminperiod">updateminperiod</a></code></li>
</ul>
</li>
</ul>
</dd>
<dt id="backtrader.observers.trades.MetaDataTrades"><code class="flex name class">
<span>class <span class="ident">MetaDataTrades</span></span>
<span>(</span><span>*args, **kwargs)</span>
</code></dt>
<dd>
<div class="desc"><p>Dirty job manager for a LineSeries</p>
<pre><code>- During __new__ (class creation), it reads "lines", "plotinfo",
  "plotlines" class variable definitions and turns them into
  Classes of type Lines or AutoClassInfo (plotinfo/plotlines)

- During "new" (instance creation) the lines/plotinfo/plotlines
  classes are substituted in the instance with instances of the
  aforementioned classes and aliases are added for the "lines" held
  in the "lines" instance

  Additionally and for remaining kwargs, these are matched against
  args in plotinfo and if existent are set there and removed from kwargs

  Remember that this Metaclass has a MetaParams (from metabase)
  as root class and therefore "params" defined for the class have been
  removed from kwargs at an earlier state
</code></pre></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class MetaDataTrades(Observer.__class__):
    def donew(cls, *args, **kwargs):
        _obj, args, kwargs = super(MetaDataTrades, cls).donew(*args, **kwargs)

        # Recreate the lines dynamically
        if _obj.params.usenames:
            lnames = tuple(x._name for x in _obj.datas)
        else:
            lnames = tuple(&#39;data{}&#39;.format(x) for x in range(len(_obj.datas)))

        # Generate a new lines class
        linescls = cls.lines._derive(uuid.uuid4().hex, lnames, 0, ())

        # Instantiate lines
        _obj.lines = linescls()

        # Generate plotlines info
        markers = [&#39;o&#39;, &#39;v&#39;, &#39;^&#39;, &#39;&lt;&#39;, &#39;&gt;&#39;, &#39;1&#39;, &#39;2&#39;, &#39;3&#39;, &#39;4&#39;, &#39;8&#39;, &#39;s&#39;, &#39;p&#39;,
                   &#39;*&#39;, &#39;h&#39;, &#39;H&#39;, &#39;+&#39;, &#39;x&#39;, &#39;D&#39;, &#39;d&#39;]

        colors = [&#39;b&#39;, &#39;g&#39;, &#39;r&#39;, &#39;c&#39;, &#39;m&#39;, &#39;y&#39;, &#39;k&#39;, &#39;b&#39;, &#39;g&#39;, &#39;r&#39;, &#39;c&#39;, &#39;m&#39;,
                  &#39;y&#39;, &#39;k&#39;, &#39;b&#39;, &#39;g&#39;, &#39;r&#39;, &#39;c&#39;, &#39;m&#39;]

        basedict = dict(ls=&#39;&#39;, markersize=8.0, fillstyle=&#39;full&#39;)

        plines = dict()
        for lname, marker, color in zip(lnames, markers, colors):
            plines[lname] = d = basedict.copy()
            d.update(marker=marker, color=color)

        plotlines = cls.plotlines._derive(
            uuid.uuid4().hex, plines, [], recurse=True)
        _obj.plotlines = plotlines()

        return _obj, args, kwargs  # return the instantiated object and args</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li><a title="backtrader.observer.MetaObserver" href="../observer.html#backtrader.observer.MetaObserver">MetaObserver</a></li>
<li><a title="backtrader.lineiterator.MetaLineIterator" href="../lineiterator.html#backtrader.lineiterator.MetaLineIterator">MetaLineIterator</a></li>
<li><a title="backtrader.lineseries.MetaLineSeries" href="../lineseries.html#backtrader.lineseries.MetaLineSeries">MetaLineSeries</a></li>
<li><a title="backtrader.lineroot.MetaLineRoot" href="../lineroot.html#backtrader.lineroot.MetaLineRoot">MetaLineRoot</a></li>
<li><a title="backtrader.metabase.MetaParams" href="../metabase.html#backtrader.metabase.MetaParams">MetaParams</a></li>
<li><a title="backtrader.metabase.MetaBase" href="../metabase.html#backtrader.metabase.MetaBase">MetaBase</a></li>
<li>builtins.type</li>
</ul>
<h3>Inherited members</h3>
<ul class="hlist">
<li><code><b><a title="backtrader.observer.MetaObserver" href="../observer.html#backtrader.observer.MetaObserver">MetaObserver</a></b></code>:
<ul class="hlist">
<li><code><a title="backtrader.observer.MetaObserver.donew" href="../lineseries.html#backtrader.lineseries.MetaLineSeries.donew">donew</a></code></li>
</ul>
</li>
</ul>
</dd>
<dt id="backtrader.observers.trades.Trades"><code class="flex name class">
<span>class <span class="ident">Trades</span></span>
</code></dt>
<dd>
<div class="desc"><p>This observer keeps track of full trades and plot the PnL level achieved
when a trade is closed.</p>
<p>A trade is open when a position goes from 0 (or crossing over 0) to X and
is then closed when it goes back to 0 (or crosses over 0 in the opposite
direction)</p>
<h2 id="params">Params</h2>
<ul>
<li>
<p><code>pnlcomm</code> (def: <code>True</code>)</p>
<p>Show net/profit and loss, i.e.: after commission. If set to <code>False</code>
if will show the result of trades before commission</p>
</li>
</ul></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class Trades(Observer):
    &#39;&#39;&#39;This observer keeps track of full trades and plot the PnL level achieved
    when a trade is closed.

    A trade is open when a position goes from 0 (or crossing over 0) to X and
    is then closed when it goes back to 0 (or crosses over 0 in the opposite
    direction)

    Params:
      - ``pnlcomm`` (def: ``True``)

        Show net/profit and loss, i.e.: after commission. If set to ``False``
        if will show the result of trades before commission
    &#39;&#39;&#39;
    _stclock = True

    lines = (&#39;pnlplus&#39;, &#39;pnlminus&#39;)

    params = dict(pnlcomm=True)

    plotinfo = dict(plot=True, subplot=True,
                    plotname=&#39;Trades - Net Profit/Loss&#39;,
                    plotymargin=0.10,
                    plothlines=[0.0])

    plotlines = dict(
        pnlplus=dict(_name=&#39;Positive&#39;,
                     ls=&#39;&#39;, marker=&#39;o&#39;, color=&#39;blue&#39;,
                     markersize=8.0, fillstyle=&#39;full&#39;),
        pnlminus=dict(_name=&#39;Negative&#39;,
                      ls=&#39;&#39;, marker=&#39;o&#39;, color=&#39;red&#39;,
                      markersize=8.0, fillstyle=&#39;full&#39;)
    )

    def __init__(self):

        self.trades = 0

        self.trades_long = 0
        self.trades_short = 0

        self.trades_plus = 0
        self.trades_minus = 0

        self.trades_plus_gross = 0
        self.trades_minus_gross = 0

        self.trades_win = 0
        self.trades_win_max = 0
        self.trades_win_min = 0

        self.trades_loss = 0
        self.trades_loss_max = 0
        self.trades_loss_min = 0

        self.trades_length = 0
        self.trades_length_max = 0
        self.trades_length_min = 0

    def next(self):
        for trade in self._owner._tradespending:
            if trade.data not in self.ddatas:
                continue

            if not trade.isclosed:
                continue

            pnl = trade.pnlcomm if self.p.pnlcomm else trade.pnl

            if pnl &gt;= 0.0:
                self.lines.pnlplus[0] = pnl
            else:
                self.lines.pnlminus[0] = pnl</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li><a title="backtrader.observer.Observer" href="../observer.html#backtrader.observer.Observer">Observer</a></li>
<li><a title="backtrader.lineiterator.ObserverBase" href="../lineiterator.html#backtrader.lineiterator.ObserverBase">ObserverBase</a></li>
<li><a title="backtrader.lineiterator.DataAccessor" href="../lineiterator.html#backtrader.lineiterator.DataAccessor">DataAccessor</a></li>
<li><a title="backtrader.lineiterator.LineIterator" href="../lineiterator.html#backtrader.lineiterator.LineIterator">LineIterator</a></li>
<li><a title="backtrader.lineseries.LineSeries" href="../lineseries.html#backtrader.lineseries.LineSeries">LineSeries</a></li>
<li><a title="backtrader.lineroot.LineMultiple" href="../lineroot.html#backtrader.lineroot.LineMultiple">LineMultiple</a></li>
<li><a title="backtrader.lineroot.LineRoot" href="../lineroot.html#backtrader.lineroot.LineRoot">LineRoot</a></li>
</ul>
<h3>Class variables</h3>
<dl>
<dt id="backtrader.observers.trades.Trades.alias"><code class="name">var <span class="ident">alias</span></code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="backtrader.observers.trades.Trades.aliased"><code class="name">var <span class="ident">aliased</span></code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="backtrader.observers.trades.Trades.frompackages"><code class="name">var <span class="ident">frompackages</span></code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="backtrader.observers.trades.Trades.linealias"><code class="name">var <span class="ident">linealias</span></code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="backtrader.observers.trades.Trades.packages"><code class="name">var <span class="ident">packages</span></code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="backtrader.observers.trades.Trades.params"><code class="name">var <span class="ident">params</span></code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="backtrader.observers.trades.Trades.plotinfo"><code class="name">var <span class="ident">plotinfo</span></code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="backtrader.observers.trades.Trades.plotlines"><code class="name">var <span class="ident">plotlines</span></code></dt>
<dd>
<div class="desc"></div>
</dd>
</dl>
<h3>Inherited members</h3>
<ul class="hlist">
<li><code><b><a title="backtrader.observer.Observer" href="../observer.html#backtrader.observer.Observer">Observer</a></b></code>:
<ul class="hlist">
<li><code><a title="backtrader.observer.Observer.addminperiod" href="../lineroot.html#backtrader.lineroot.LineMultiple.addminperiod">addminperiod</a></code></li>
<li><code><a title="backtrader.observer.Observer.incminperiod" href="../lineroot.html#backtrader.lineroot.LineMultiple.incminperiod">incminperiod</a></code></li>
<li><code><a title="backtrader.observer.Observer.lines" href="../lineseries.html#backtrader.lineseries.LineSeries.lines">lines</a></code></li>
<li><code><a title="backtrader.observer.Observer.minbuffer" href="../lineroot.html#backtrader.lineroot.LineRoot.minbuffer">minbuffer</a></code></li>
<li><code><a title="backtrader.observer.Observer.next" href="../lineiterator.html#backtrader.lineiterator.LineIterator.next">next</a></code></li>
<li><code><a title="backtrader.observer.Observer.nextstart" href="../lineiterator.html#backtrader.lineiterator.LineIterator.nextstart">nextstart</a></code></li>
<li><code><a title="backtrader.observer.Observer.once" href="../lineroot.html#backtrader.lineroot.LineRoot.once">once</a></code></li>
<li><code><a title="backtrader.observer.Observer.oncestart" href="../lineroot.html#backtrader.lineroot.LineRoot.oncestart">oncestart</a></code></li>
<li><code><a title="backtrader.observer.Observer.prenext" href="../lineiterator.html#backtrader.lineiterator.LineIterator.prenext">prenext</a></code></li>
<li><code><a title="backtrader.observer.Observer.preonce" href="../lineroot.html#backtrader.lineroot.LineRoot.preonce">preonce</a></code></li>
<li><code><a title="backtrader.observer.Observer.qbuffer" href="../lineroot.html#backtrader.lineroot.LineRoot.qbuffer">qbuffer</a></code></li>
<li><code><a title="backtrader.observer.Observer.setminperiod" href="../lineroot.html#backtrader.lineroot.LineRoot.setminperiod">setminperiod</a></code></li>
<li><code><a title="backtrader.observer.Observer.updateminperiod" href="../lineroot.html#backtrader.lineroot.LineRoot.updateminperiod">updateminperiod</a></code></li>
</ul>
</li>
</ul>
</dd>
</dl>
</section>
</article>
<nav id="sidebar">
<h1>Index</h1>
<div class="toc">
<ul></ul>
</div>
<ul id="index">
<li><h3>Super-module</h3>
<ul>
<li><code><a title="backtrader.observers" href="index.html">backtrader.observers</a></code></li>
</ul>
</li>
<li><h3><a href="#header-classes">Classes</a></h3>
<ul>
<li>
<h4><code><a title="backtrader.observers.trades.DataTrades" href="#backtrader.observers.trades.DataTrades">DataTrades</a></code></h4>
<ul class="two-column">
<li><code><a title="backtrader.observers.trades.DataTrades.alias" href="#backtrader.observers.trades.DataTrades.alias">alias</a></code></li>
<li><code><a title="backtrader.observers.trades.DataTrades.aliased" href="#backtrader.observers.trades.DataTrades.aliased">aliased</a></code></li>
<li><code><a title="backtrader.observers.trades.DataTrades.frompackages" href="#backtrader.observers.trades.DataTrades.frompackages">frompackages</a></code></li>
<li><code><a title="backtrader.observers.trades.DataTrades.linealias" href="#backtrader.observers.trades.DataTrades.linealias">linealias</a></code></li>
<li><code><a title="backtrader.observers.trades.DataTrades.packages" href="#backtrader.observers.trades.DataTrades.packages">packages</a></code></li>
<li><code><a title="backtrader.observers.trades.DataTrades.params" href="#backtrader.observers.trades.DataTrades.params">params</a></code></li>
<li><code><a title="backtrader.observers.trades.DataTrades.plotinfo" href="#backtrader.observers.trades.DataTrades.plotinfo">plotinfo</a></code></li>
<li><code><a title="backtrader.observers.trades.DataTrades.plotlines" href="#backtrader.observers.trades.DataTrades.plotlines">plotlines</a></code></li>
</ul>
</li>
<li>
<h4><code><a title="backtrader.observers.trades.MetaDataTrades" href="#backtrader.observers.trades.MetaDataTrades">MetaDataTrades</a></code></h4>
</li>
<li>
<h4><code><a title="backtrader.observers.trades.Trades" href="#backtrader.observers.trades.Trades">Trades</a></code></h4>
<ul class="two-column">
<li><code><a title="backtrader.observers.trades.Trades.alias" href="#backtrader.observers.trades.Trades.alias">alias</a></code></li>
<li><code><a title="backtrader.observers.trades.Trades.aliased" href="#backtrader.observers.trades.Trades.aliased">aliased</a></code></li>
<li><code><a title="backtrader.observers.trades.Trades.frompackages" href="#backtrader.observers.trades.Trades.frompackages">frompackages</a></code></li>
<li><code><a title="backtrader.observers.trades.Trades.linealias" href="#backtrader.observers.trades.Trades.linealias">linealias</a></code></li>
<li><code><a title="backtrader.observers.trades.Trades.packages" href="#backtrader.observers.trades.Trades.packages">packages</a></code></li>
<li><code><a title="backtrader.observers.trades.Trades.params" href="#backtrader.observers.trades.Trades.params">params</a></code></li>
<li><code><a title="backtrader.observers.trades.Trades.plotinfo" href="#backtrader.observers.trades.Trades.plotinfo">plotinfo</a></code></li>
<li><code><a title="backtrader.observers.trades.Trades.plotlines" href="#backtrader.observers.trades.Trades.plotlines">plotlines</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</nav>
</main>
<footer id="footer">
<p>Generated by <a href="https://pdoc3.github.io/pdoc" title="pdoc: Python API documentation generator"><cite>pdoc</cite> 0.10.0</a>.</p>
</footer>
</body>
</html>